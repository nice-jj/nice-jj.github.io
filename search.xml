<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Linux服务启动配置文件的作用和流程]]></title>
      <url>http://www.nice-jj.com/2017/02/28/Linux%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E6%B5%81%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1 id="一、centos6-5最小化安装后自带的服务"><a href="#一、centos6-5最小化安装后自带的服务" class="headerlink" title="一、centos6.5最小化安装后自带的服务"></a>一、centos6.5最小化安装后自带的服务</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">[root@localhost init.d]# ll</div><div class="line">总用量 128</div><div class="line">-rwxr-xr-x. 1 root root  3378 6月  22 2012 auditd</div><div class="line">-rwxr-xr-x. 1 root root  2793 7月  19 2011 crond</div><div class="line">-rw-r--r--. 1 root root 18216 1月   9 2013 functions</div><div class="line">-rwxr-xr-x. 1 root root  5829 1月   9 2013 halt</div><div class="line">-rwxr-xr-x. 1 root root  9515 2月  22 2013 ip6tables</div><div class="line">-rwxr-xr-x. 1 root root  9409 2月  22 2013 iptables</div><div class="line">-rwxr-xr-x. 1 root root   652 1月   9 2013 killall</div><div class="line">-rwxr-xr-x. 1 root root  2200 9月  14 2012 messagebus</div><div class="line">-rwxr-xr-x. 1 root root  2989 1月   9 2013 netconsole</div><div class="line">-rwxr-xr-x. 1 root root  5486 1月   9 2013 netfs</div><div class="line">-rwxr-xr-x. 1 root root  6334 1月   9 2013 network</div><div class="line">-rwxr-xr-x. 1 root root  3852 12月  3 2011 postfix</div><div class="line">-rwxr-xr-x. 1 root root  1559 5月  20 2009 rdisc</div><div class="line">-rwxr-xr-x. 1 root root  1822 2月  22 2013 restorecond</div><div class="line">-rwxr-xr-x. 1 root root  2011 1月  10 2013 rsyslog</div><div class="line">-rwxr-xr-x. 1 root root  1698 2月  22 2013 sandbox</div><div class="line">-rwxr-xr-x. 1 root root  2056 11月 20 2012 saslauthd</div><div class="line">-rwxr-xr-x. 1 root root   647 1月   9 2013 single</div><div class="line">-rwxr-xr-x. 1 root root  4534 2月  22 2013 sshd</div><div class="line">-rwxr-xr-x. 1 root root  2294 2月  22 2013 udev-post</div><div class="line">[root@localhost init.d]# chkconfig --list</div><div class="line">auditd         	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">crond          	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">ip6tables      	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">iptables       	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">messagebus     	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">netconsole     	0:关闭	1:关闭	2:关闭	3:关闭	4:关闭	5:关闭	6:关闭</div><div class="line">netfs          	0:关闭	1:关闭	2:关闭	3:启用	4:启用	5:启用	6:关闭</div><div class="line">network        	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">postfix        	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">rdisc          	0:关闭	1:关闭	2:关闭	3:关闭	4:关闭	5:关闭	6:关闭</div><div class="line">restorecond    	0:关闭	1:关闭	2:关闭	3:关闭	4:关闭	5:关闭	6:关闭</div><div class="line">rsyslog        	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">saslauthd      	0:关闭	1:关闭	2:关闭	3:关闭	4:关闭	5:关闭	6:关闭</div><div class="line">sshd           	0:关闭	1:关闭	2:启用	3:启用	4:启用	5:启用	6:关闭</div><div class="line">udev-post      	0:关闭	1:启用	2:启用	3:启用	4:启用	5:启用	6:关闭</div></pre></td></tr></table></figure>
<h1 id="二、service命令"><a href="#二、service命令" class="headerlink" title="二、service命令"></a>二、service命令</h1><p>service 命令用于对系统服务进行管理，比如启动（start）、停止（stop）、重启（restart）、重新加载配置（reload）、查看状态（status）等。<br>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">service sshd #显示sshd命令行的用法</div><div class="line">service sshd start #启动sshd</div><div class="line">service sshd stop #停止sshd</div><div class="line">service sshd restart #停止sshd</div><div class="line">service sshd reload #重新加载sshd的配置文件</div><div class="line">service sshd status #查看sshd状态</div></pre></td></tr></table></figure></p>
<p>如果使用yum或apt-get安装应用，安装好之后会自动在/etc/init.d目录下创建一个shell脚本来管理相应的服务。<br>这样就可以使用/etc/init.d/sshd start或service sshd start来启动sshd服务，其他服务类似。<br>如果是自己编译安装的应用，需要将源码包里的管理脚本加入到/etc/init.d中才可使用以上方法来管理此服务，如果源码包里没有管理脚本，则需要自己写一个进程管理脚本来管理此服务。  </p>
<h1 id="三、chkconfig命令"><a href="#三、chkconfig命令" class="headerlink" title="三、chkconfig命令"></a>三、chkconfig命令</h1><p>提供了一个维护/etc/rc[0~6] d 文件夹的命令行工具，它减轻了系统直接管理这些文件夹中的符号连接的负担。chkconfig主要包括5个原始功能：为系统管理增加新的服务、为系统管理移除服务、列出单签服务的启动信息、改变服务的启动信息和检查特殊服务的启动状态。<br>必要参数<br>    –add 开启指定的服务程序<br>    –del 关闭指定的服务程序<br>    –list 列出chkconfig所知道的所有服务  </p>
<p>选择参数<br>    –help 显示帮助信息<br>    –version 显示版本信息<br>    –level&lt;代号&gt; 设置服务程序的等级代号，它是一串0~7的数字，如“-level35”代表指定运行等级3和5  </p>
<blockquote>
<p>等级0表示：表示关机<br>等级1表示：单用户模式<br>等级2表示：无网络连接的多用户命令行模式<br>等级3表示：有网络连接的多用户命令行模式<br>等级4表示：不可用<br>等级5表示：带图形界面的多用户模式<br>等级6表示：重新启动  </p>
</blockquote>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">chkconfig --list #列出所有的系统服务</div><div class="line">chkconfig --add httpd #增加httpd服务</div><div class="line">chkconfig --del httpd #删除httpd服务</div><div class="line">chkconfig --level httpd 2345 on #在运行级别2、3、4、5的情况下都是on（开启）的状态</div><div class="line">chkconfig httpd on #将httpd加入开机启动</div><div class="line">chkconfig httpd off #关闭httpd开机启动</div></pre></td></tr></table></figure></p>
<p>当使用chkconfig加入开机启动但没有加–level参数指定运行级别，则会根据使用默认级别2、3、4、5。<br>或根据管理脚本的注释来定义运行级别，以sshd为例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#</div><div class="line"># sshd          Start up the OpenSSH server daemon</div><div class="line">#</div><div class="line"># chkconfig: 2345 55 25</div><div class="line"># description: SSH is a protocol for secure remote shell access. \</div><div class="line">#              This service starts up the OpenSSH server daemon.</div><div class="line">#</div><div class="line"># processname: sshd</div><div class="line"># config: /etc/ssh/ssh_host_key</div><div class="line"># config: /etc/ssh/ssh_host_key.pub</div><div class="line"># config: /etc/ssh/ssh_random_seed</div><div class="line"># config: /etc/ssh/sshd_config</div><div class="line"># pidfile: /var/run/sshd.pid</div><div class="line"></div><div class="line">### BEGIN INIT INFO</div><div class="line"># Provides: sshd</div><div class="line"># Required-Start: $local_fs $network $syslog</div><div class="line"># Required-Stop: $local_fs $syslog</div><div class="line"># Should-Start: $syslog</div><div class="line"># Should-Stop: $network $syslog</div><div class="line"># Default-Start: 2 3 4 5</div><div class="line"># Default-Stop: 0 1 6</div><div class="line"># Short-Description: Start up the OpenSSH server daemon</div><div class="line"># Description:       SSH is a protocol for secure remote shell access.</div><div class="line">#                    This service starts up the OpenSSH server daemon.</div><div class="line">### END INIT INFO</div></pre></td></tr></table></figure></p>
<ul>
<li>chkconfig: 2345 55 25<blockquote>
<p>在使用chkconfig加入开机启动项时没有使用level参数，则会根据这一行来定义启动级别和启动顺序，其中2345表示<br>sshd在启动级别为2345的时候启动，55表示sshd开机时的启动优先级，25表示sshd关机时的关闭优先级。</p>
</blockquote>
</li>
<li>processname: sshd<blockquote>
<p>进程名称</p>
</blockquote>
</li>
<li>config: /etc/ssh/*<blockquote>
<p>sshd服务的相关配置文件。</p>
</blockquote>
</li>
<li>pidfile: /var/run/sshd.pid<blockquote>
<p>sshd启动后的PID。</p>
</blockquote>
</li>
<li>### BEGIN INIT INFO 和 ### END INIT INFO里面的内容  <blockquote>
<p>Default-Start: 2 3 4 5（表示该服务在开机时运行级别为2 3 4 5时启动，与chkconfig是“与”的关系）<br>Default-Stop: 0 1 6（表示该服务在开机时运行级别为0 1 6时不启动，2 3 4 5启动，优先级高于Default-Start）<br>详细介绍：<a href="https://wiki.debian.org/LSBInitScripts" target="_blank" rel="external">https://wiki.debian.org/LSBInitScripts</a>  </p>
</blockquote>
</li>
</ul>
<h1 id="四、-var-lock-subsys"><a href="#四、-var-lock-subsys" class="headerlink" title="四、/var/lock/subsys/"></a>四、/var/lock/subsys/</h1><p>程序需要判断是否当前已经有一个实例在运行，这个目录就是让程序判断是否有实例运行的标识，保持服务的唯一性。  </p>
<h1 id="五、-var-run"><a href="#五、-var-run" class="headerlink" title="五、/var/run/"></a>五、/var/run/</h1><p>/var/run 目录中存放的是自系统启动以来描述系统信息的文件。比较常见的用途是daemon进程将自己的pid保存到这个目录。标准要求这个文件夹中的文件必须是在系统启动的时候清空，以便建立新的文件。<br>pid文件的作用：防止进程启动多个副本，保持进程的唯一性。<br>utmp文件：就是用来记录机器的启动时间以及当前登陆用户的,可用who或w命令显示当中的内容。</p>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
            <category> Linux服务启动配置文件的作用和流程 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Windows路由表设置]]></title>
      <url>http://www.nice-jj.com/2017/02/23/Windows%E8%B7%AF%E7%94%B1%E8%A1%A8%E8%AE%BE%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>因工作需要，在访问公司内部资源的时候必须要拨VPN才能连上公司总部的资源，如果拨了之后有可能会影响外网资源的访问速度。其实最重要的是，<br>拨了VPN，谁知道公司会不会对我的流量进行审计，最后“资源”都可能泄漏，所以就花了两个小时研究了一下怎么在拨了VPN之后，<br>只有在访问公司内部资源的时候才通过VPN访问，访问91p这些站点不走VPN。</p>
<h2 id="一、第一种方法是更改windows的路由表"><a href="#一、第一种方法是更改windows的路由表" class="headerlink" title="一、第一种方法是更改windows的路由表"></a>一、第一种方法是更改windows的路由表</h2><h3 id="1-查看没有拨VPN时候的路由表，并记录下来，命令是route-print，可以看到相应的路由表和网卡对应的接口列表（不懂路由的自己google相关资料）"><a href="#1-查看没有拨VPN时候的路由表，并记录下来，命令是route-print，可以看到相应的路由表和网卡对应的接口列表（不懂路由的自己google相关资料）" class="headerlink" title="1. 查看没有拨VPN时候的路由表，并记录下来，命令是route print，可以看到相应的路由表和网卡对应的接口列表（不懂路由的自己google相关资料）"></a>1. 查看没有拨VPN时候的路由表，并记录下来，命令是route print，可以看到相应的路由表和网卡对应的接口列表（不懂路由的自己google相关资料）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">IPv4 路由表</div><div class="line">===========================================================================</div><div class="line">活动路由:</div><div class="line">网络目标                   网络掩码          网关               接口      跃点数</div><div class="line">          0.0.0.0          0.0.0.0      192.168.0.1    192.168.0.105     20</div><div class="line">        127.0.0.0        255.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        127.0.0.1  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  127.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">      169.254.0.0      255.255.0.0            在链路上   169.254.162.228    276</div><div class="line">      169.254.0.0      255.255.0.0            在链路上     169.254.85.24    276</div><div class="line">    169.254.85.24  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  169.254.162.228  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">      192.168.0.0    255.255.255.0            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.105  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     192.168.0.105    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     169.254.85.24    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上   169.254.162.228    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">===========================================================================</div></pre></td></tr></table></figure>
<blockquote>
<p>关键看第一行，网络目标为0.0.0.0，掩码为0.0.0.0，网关为192.168.0.1，接口为192.168.0.105。<br>打个比方：从你的电脑访问百度的时候就好比从深圳到广州，网络目标是广州，网络掩码是广东省，网关是收费站，接口是深圳</p>
</blockquote>
<h3 id="2-拨了VPN之后的路由表，并记录下来"><a href="#2-拨了VPN之后的路由表，并记录下来" class="headerlink" title="2. 拨了VPN之后的路由表，并记录下来"></a>2. 拨了VPN之后的路由表，并记录下来</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">IPv4 路由表</div><div class="line">===========================================================================</div><div class="line">活动路由:</div><div class="line">网络目标                  网络掩码          网关           接口          跃点数</div><div class="line">          0.0.0.0          0.0.0.0      192.168.0.1    192.168.0.105     20</div><div class="line">          0.0.0.0          0.0.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">          0.0.0.0        128.0.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">        手动打码        255.255.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">       10.10.0.16  255.255.255.252            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.18  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.19  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">        手动打码          255.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        127.0.0.1  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  127.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">        手动打码          128.0.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">      169.254.0.0      255.255.0.0            在链路上   169.254.162.228    276</div><div class="line">      169.254.0.0      255.255.0.0            在链路上     169.254.85.24    276</div><div class="line">    169.254.85.24  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  169.254.162.228  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">      192.168.0.0    255.255.255.0            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.105  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">      手动打码        255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">  手动打码          255.255.255.255      192.168.0.1    192.168.0.105     20</div><div class="line">        224.0.0.0        240.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     192.168.0.105    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上        10.10.0.18    286</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     169.254.85.24    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上   169.254.162.228    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">===========================================================================</div></pre></td></tr></table></figure>
<blockquote>
<p>主要看前三行的路由信息，可以看到拨了VPN后通过10.10.0.17这个网关出去了，接下来就要删除这些路由信息</p>
</blockquote>
<h3 id="3-删除网络目标为0-0-0-0的路由规则，其余不需要删除，再查看路由信息"><a href="#3-删除网络目标为0-0-0-0的路由规则，其余不需要删除，再查看路由信息" class="headerlink" title="3. 删除网络目标为0.0.0.0的路由规则，其余不需要删除，再查看路由信息"></a>3. 删除网络目标为0.0.0.0的路由规则，其余不需要删除，再查看路由信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">C:\Users\Administrator&gt;route delete 0.0.0.0</div><div class="line"> 操作完成!</div><div class="line"></div><div class="line">C:\Users\Administrator&gt;route print</div><div class="line">IPv4 路由表</div><div class="line">===========================================================================</div><div class="line">活动路由:</div><div class="line">网络目标                   网络掩码          网关               接口      跃点数</div><div class="line">        手动打码        255.255.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">       10.10.0.16  255.255.255.252            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.18  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.19  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">        手动打码          255.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        127.0.0.1  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  127.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">        手动打码          128.0.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">      169.254.0.0      255.255.0.0            在链路上   169.254.162.228    276</div><div class="line">      169.254.0.0      255.255.0.0            在链路上     169.254.85.24    276</div><div class="line">    169.254.85.24  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  169.254.162.228  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">      192.168.0.0    255.255.255.0            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.105  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">      手动打码        255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">  手动打码          255.255.255.255      192.168.0.1    192.168.0.105     20</div><div class="line">        224.0.0.0        240.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     192.168.0.105    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上        10.10.0.18    286</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     169.254.85.24    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上   169.254.162.228    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">===========================================================================</div></pre></td></tr></table></figure>
<h3 id="4-添加路由，表示访问任何信息都通过192-168-0-1网关"><a href="#4-添加路由，表示访问任何信息都通过192-168-0-1网关" class="headerlink" title="4. 添加路由，表示访问任何信息都通过192.168.0.1网关"></a>4. 添加路由，表示访问任何信息都通过192.168.0.1网关</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\Administrator&gt;route add 0.0.0.0 mask 0.0.0.0 192.168.0.1</div><div class="line"> 操作完成!</div></pre></td></tr></table></figure>
<h3 id="5-再查看路由表-可以看到访问所有地址（0-0-0-0）都通过192-168-0-1网关，访问公司内网资源都通过10-10-0-17网关，如果还有访问不到的，按照上面的命令添加即可"><a href="#5-再查看路由表-可以看到访问所有地址（0-0-0-0）都通过192-168-0-1网关，访问公司内网资源都通过10-10-0-17网关，如果还有访问不到的，按照上面的命令添加即可" class="headerlink" title="5. 再查看路由表,可以看到访问所有地址（0.0.0.0）都通过192.168.0.1网关，访问公司内网资源都通过10.10.0.17网关，如果还有访问不到的，按照上面的命令添加即可"></a>5. 再查看路由表,可以看到访问所有地址（0.0.0.0）都通过192.168.0.1网关，访问公司内网资源都通过10.10.0.17网关，如果还有访问不到的，按照上面的命令添加即可</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">IPv4 路由表</div><div class="line">===========================================================================</div><div class="line">活动路由:</div><div class="line">网络目标        网络掩码          网关       接口   跃点数</div><div class="line">          0.0.0.0          0.0.0.0      192.168.0.1    192.168.0.105     21</div><div class="line">        手动打码        255.255.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">       10.10.0.16  255.255.255.252            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.18  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">       10.10.0.19  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">        手动打码          255.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        127.0.0.1  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  127.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">        手动打码          128.0.0.0       10.10.0.17       10.10.0.18     30</div><div class="line">      169.254.0.0      255.255.0.0            在链路上   169.254.162.228    276</div><div class="line">      169.254.0.0      255.255.0.0            在链路上     169.254.85.24    276</div><div class="line">    169.254.85.24  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  169.254.162.228  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">  169.254.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">      192.168.0.0    255.255.255.0            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.105  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">    192.168.0.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">      手动打码        255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">    手动打码          255.255.255.0       10.10.0.17       10.10.0.18     30</div><div class="line">  手动打码          255.255.255.255      192.168.0.1    192.168.0.105     20</div><div class="line">        224.0.0.0        240.0.0.0            在链路上         127.0.0.1    306</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     192.168.0.105    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上        10.10.0.18    286</div><div class="line">        224.0.0.0        240.0.0.0            在链路上     169.254.85.24    276</div><div class="line">        224.0.0.0        240.0.0.0            在链路上   169.254.162.228    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上         127.0.0.1    306</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     192.168.0.105    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上        10.10.0.18    286</div><div class="line">  255.255.255.255  255.255.255.255            在链路上     169.254.85.24    276</div><div class="line">  255.255.255.255  255.255.255.255            在链路上   169.254.162.228    276</div><div class="line">===========================================================================</div></pre></td></tr></table></figure>
<h3 id="6-路由跟踪测试，可以看到访问内部资源通过VPN访问，访问外部资源不通过VPN访问，并且公网IP也显示的是其所在地的IP"><a href="#6-路由跟踪测试，可以看到访问内部资源通过VPN访问，访问外部资源不通过VPN访问，并且公网IP也显示的是其所在地的IP" class="headerlink" title="6. 路由跟踪测试，可以看到访问内部资源通过VPN访问，访问外部资源不通过VPN访问，并且公网IP也显示的是其所在地的IP"></a>6. 路由跟踪测试，可以看到访问内部资源通过VPN访问，访问外部资源不通过VPN访问，并且公网IP也显示的是其所在地的IP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">C:\Users\Administrator&gt;tracert 192.168.x.x</div><div class="line"></div><div class="line">通过最多 30 个跃点跟踪</div><div class="line">到 wiki.xxx.cn [192.168.x.x] 的路由:</div><div class="line"></div><div class="line">  1    37 ms    37 ms    37 ms  10.10.x.x</div><div class="line">  2    37 ms    37 ms    37 ms  wiki.xxx.cn [192.168.x.x]</div><div class="line"></div><div class="line">跟踪完成。</div><div class="line"></div><div class="line">C:\Users\Administrator&gt;tracert www.baidu.com</div><div class="line"></div><div class="line">通过最多 30 个跃点跟踪</div><div class="line">到 www.a.shifen.com [119.75.217.109] 的路由:</div><div class="line"></div><div class="line">  1    &lt;1 毫秒   &lt;1 毫秒   &lt;1 毫秒 192.168.0.1</div><div class="line">  2     3 ms     2 ms     2 ms  192.168.13.254</div><div class="line">  3     1 ms     1 ms     1 ms  192.168.5.1</div><div class="line">  4     *        *        *     请求超时。</div><div class="line">  5     1 ms     1 ms     1 ms  10.193.181.11</div><div class="line">  6     3 ms     4 ms     2 ms  113.105.70.222</div><div class="line">  7     2 ms     2 ms     2 ms  121.15.179.129</div><div class="line">  8     2 ms     2 ms     2 ms  121.15.179.82</div><div class="line">  9     *        *        2 ms  183.56.65.30</div><div class="line"> 10    38 ms    39 ms    39 ms  202.97.65.101</div><div class="line"> 11     *        *        *     请求超时。</div><div class="line"> 12    37 ms    37 ms    37 ms  220.181.17.50</div><div class="line"> 13     *        *        *     请求超时。</div><div class="line"> 14     *        *        *     请求超时。</div><div class="line"> 15    35 ms    35 ms    35 ms  119.75.217.109</div><div class="line"></div><div class="line">跟踪完成。</div></pre></td></tr></table></figure>
<h3 id="7-总结就两条命令"><a href="#7-总结就两条命令" class="headerlink" title="7. 总结就两条命令"></a>7. 总结就两条命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">route delete 0.0.0.0</div><div class="line">route add 0.0.0.0 mask 0.0.0.0 192.168.0.1</div></pre></td></tr></table></figure>
<h2 id="二、还有一种方法，暂未实践，理论上可行"><a href="#二、还有一种方法，暂未实践，理论上可行" class="headerlink" title="二、还有一种方法，暂未实践，理论上可行"></a>二、还有一种方法，暂未实践，理论上可行</h2><p>准备两个路由器，其中一个要可以拨VPN的，利用笔记本（我们都用笔记本）的双网卡机制，无线网卡连VPN的路由器，有线网卡连另外一个路由器，然后在通过设置windows的路由表就可以实现<br>所需功能，并且省略拨VPN的麻烦</p>
<blockquote>
<p>如有错误，欢迎来搞</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> 计算机网络 </category>
            
            <category> Windows路由表设置 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Linux启动顺序]]></title>
      <url>http://www.nice-jj.com/2017/02/19/Linux%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F/</url>
      <content type="html"><![CDATA[<h2 id="一、系统启动初始化init阶段"><a href="#一、系统启动初始化init阶段" class="headerlink" title="一、系统启动初始化init阶段"></a>一、系统启动初始化init阶段</h2><h3 id="1-Grub加载内核之后，第一个运行的程序是-sbin-init"><a href="#1-Grub加载内核之后，第一个运行的程序是-sbin-init" class="headerlink" title="1. Grub加载内核之后，第一个运行的程序是 /sbin/init"></a>1. Grub加载内核之后，第一个运行的程序是 /sbin/init</h3><p>init是SysVinit的一个实体进程，是系统所有进程的顶级父进程，PID是1  </p>
<h3 id="2-sbin-init-读取-etc-inittab文件，确定运行级别"><a href="#2-sbin-init-读取-etc-inittab文件，确定运行级别" class="headerlink" title="2. /sbin/init 读取 /etc/inittab文件，确定运行级别"></a>2. /sbin/init 读取 /etc/inittab文件，确定运行级别</h3><p>etc/inittab文件的信息会包含以下信息给init程序  </p>
<ul>
<li>捕获组合键的定义  </li>
<li>定义电源 fail/restore 脚本  </li>
<li>启动 getty 和虚拟控制台  </li>
<li>系统需要进入的 runlevel  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">[root@centos ~]# cat /etc/inittab</div><div class="line"># inittab is only used by upstart for the default runlevel.</div><div class="line">#</div><div class="line"># ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.</div><div class="line">#</div><div class="line"># System initialization is started by /etc/init/rcS.conf</div><div class="line">#</div><div class="line"># Individual runlevels are started by /etc/init/rc.conf</div><div class="line">#</div><div class="line"># Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf</div><div class="line">#</div><div class="line"># Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,</div><div class="line"># with configuration in /etc/sysconfig/init.</div><div class="line">#</div><div class="line"># For information on how to write upstart event handlers, or how</div><div class="line"># upstart works, see init(5), init(8), and initctl(8).</div><div class="line">#</div><div class="line"># Default runlevel. The runlevels used are:</div><div class="line">#   0 - halt (Do NOT set initdefault to this)</div><div class="line">#   1 - Single user mode</div><div class="line">#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)</div><div class="line">#   3 - Full multiuser mode</div><div class="line">#   4 - unused</div><div class="line">#   5 - X11</div><div class="line">#   6 - reboot (Do NOT set initdefault to this)</div><div class="line">#</div><div class="line">id:3:initdefault:</div></pre></td></tr></table></figure>
<p>当前系统使用有网络支持的多用户模式，字符终端，没有图形界面<br>Linux的运行等级设定如下:  </p>
<blockquote>
<p>0：关机<br>1：单用户模式<br>2：无网络支持的多用户模式<br>3：有网络支持的多用户模式<br>4：保留，未使用<br>5：有网络支持有X-Window支持的多用户模式<br>6：重新引导系统，即重启  </p>
</blockquote>
<h3 id="3-sbin-init-执行-etc-rc-d-rc-sysinit脚本"><a href="#3-sbin-init-执行-etc-rc-d-rc-sysinit脚本" class="headerlink" title="3. /sbin/init 执行 /etc/rc.d/rc.sysinit脚本"></a>3. /sbin/init 执行 /etc/rc.d/rc.sysinit脚本</h3><p>sysinit的是系统启动的初始化脚本, 会做以下一些工作：  </p>
<ul>
<li>激活 udev 和 selinux  </li>
<li>设置定义在/etc/sysctl.conf 中的内核参数  </li>
<li>设置系统时钟  </li>
<li>加载 keymaps  </li>
<li>使用交换分区  </li>
<li>设置主机名(hostname)  </li>
<li>根分区检查和 remount  </li>
<li>激活 RAID 和 LVM 设备  </li>
<li>开启磁盘配额  </li>
<li>检查并挂载所有文件系统  </li>
<li>清除过期的 locks 和 PID 文件  </li>
</ul>
<h3 id="4-sbin-init-执行-etc-rc-d-rc脚本"><a href="#4-sbin-init-执行-etc-rc-d-rc脚本" class="headerlink" title="4. /sbin/init 执行 /etc/rc.d/rc脚本"></a>4. /sbin/init 执行 /etc/rc.d/rc脚本</h3><blockquote>
<p>/etc/rc脚本确定 /etc/inittab文件配置的运行级别ID(X)。</p>
</blockquote>
<p>每个 runlevel X 都有一个这样的目录，目录名为/etc/rc.d/rcX.d。在这些目录下存放着很多不同的脚本。<br>文件名以 S (start) 开头的脚本就是启动时应该运行的脚本，S 后面跟的数字定义了这些脚本的执行顺序<br>文件名以 K (kill) 开头的脚本表示启动的时候不执行的脚本。<br>在/etc/rc.d/rcX.d 目录下的脚本其实都是一些软链接文件，真实的脚本文件存放在/etc/init.d 目录下, 这个目录的文件通常被称为Linux服务启动脚本  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">[root@centos rc3.d]# pwd</div><div class="line">/etc/rc3.d</div><div class="line">[root@centos rc3.d]# ls -al</div><div class="line">总用量 8</div><div class="line">drwxr-xr-x.  2 root root 4096 11月 29 13:12 .</div><div class="line">drwxr-xr-x. 10 root root 4096 1月  27 09:34 ..</div><div class="line">lrwxrwxrwx.  1 root root   19 11月 29 12:49 K10saslauthd -&gt; ../init.d/saslauthd</div><div class="line">lrwxrwxrwx.  1 root root   17 11月 16 2015 K30postfix -&gt; ../init.d/postfix</div><div class="line">lrwxrwxrwx.  1 root root   20 11月 16 2015 K50netconsole -&gt; ../init.d/netconsole</div><div class="line">lrwxrwxrwx.  1 root root   21 11月 16 2015 K87restorecond -&gt; ../init.d/restorecond</div><div class="line">lrwxrwxrwx.  1 root root   15 11月 16 2015 K89rdisc -&gt; ../init.d/rdisc</div><div class="line">lrwxrwxrwx.  1 root root   19 11月 16 2015 K92ip6tables -&gt; ../init.d/ip6tables</div><div class="line">lrwxrwxrwx.  1 root root   18 11月 29 12:34 K92iptables -&gt; ../init.d/iptables</div><div class="line">lrwxrwxrwx.  1 root root   22 11月 16 2015 S02lvm2-monitor -&gt; ../init.d/lvm2-monitor</div><div class="line">lrwxrwxrwx.  1 root root   17 11月 16 2015 S10network -&gt; ../init.d/network</div><div class="line">lrwxrwxrwx.  1 root root   16 11月 16 2015 S11auditd -&gt; ../init.d/auditd</div><div class="line">lrwxrwxrwx.  1 root root   17 11月 16 2015 S12rsyslog -&gt; ../init.d/rsyslog</div><div class="line">lrwxrwxrwx.  1 root root   26 11月 16 2015 S25blk-availability -&gt; ../init.d/blk-availability</div><div class="line">lrwxrwxrwx.  1 root root   15 11月 16 2015 S25netfs -&gt; ../init.d/netfs</div><div class="line">lrwxrwxrwx.  1 root root   19 11月 16 2015 S26udev-post -&gt; ../init.d/udev-post</div><div class="line">lrwxrwxrwx.  1 root root   14 11月 26 08:19 S55sshd -&gt; ../init.d/sshd</div><div class="line">lrwxrwxrwx.  1 root root   15 11月 16 2015 S90crond -&gt; ../init.d/crond</div><div class="line">lrwxrwxrwx.  1 root root   15 11月 29 13:12 S95jexec -&gt; ../init.d/jexec</div><div class="line">lrwxrwxrwx.  1 root root   11 11月 16 2015 S99local -&gt; ../rc.local</div></pre></td></tr></table></figure>
<blockquote>
<p>chkconfig 名字就是对/etc/init.d/目录下的服务脚本进行管理的工具，实际上就是对 /etc/rcX.d/下的软链接文件的增删改。  </p>
</blockquote>
<h3 id="5-sbin-init-执行-etc-rc-d-rc-local-脚本"><a href="#5-sbin-init-执行-etc-rc-d-rc-local-脚本" class="headerlink" title="5. /sbin/init 执行 /etc/rc.d/rc.local 脚本"></a>5. /sbin/init 执行 /etc/rc.d/rc.local 脚本</h3><p>rc.local 是 Linux 留给用户进行个性化设置的地方。比如放一些自定义的启动命令  </p>
<h3 id="6-启动登录终端-sbin-mingetty，等待登录"><a href="#6-启动登录终端-sbin-mingetty，等待登录" class="headerlink" title="6. 启动登录终端/sbin/mingetty，等待登录"></a>6. 启动登录终端/sbin/mingetty，等待登录</h3><p>mingetty 会启动 /bin/login进程，用来验证帐户密码，输入正确的账户密码之后,从/etc/passwd的账户配置里面启动响应的shell,例如下面root帐户使用了bash<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@centos ~]# cat /etc/passwd</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">sync:x:5:0:sync:/sbin:/bin/sync</div><div class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</div><div class="line">halt:x:7:0:halt:/sbin:/sbin/halt</div><div class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</div></pre></td></tr></table></figure></p>
<h2 id="二、用户登录阶段"><a href="#二、用户登录阶段" class="headerlink" title="二、用户登录阶段"></a>二、用户登录阶段</h2><h3 id="7-用户登录后先执行-etc-profile"><a href="#7-用户登录后先执行-etc-profile" class="headerlink" title="7. 用户登录后先执行 /etc/profile"></a>7. 用户登录后先执行 /etc/profile</h3><blockquote>
<p>这个文件是所有用户登录系统后的设置环境信息,当用户第一次登录时,该文件被执行. 并从/etc/profile.d目录的配置文件中搜集shell的设置<br>紧接着profile文件里面去启动 /etc/profile.d 下的所有文件  </p>
</blockquote>
<h3 id="8-执行-bash-profile"><a href="#8-执行-bash-profile" class="headerlink" title="8. 执行 ~/.bash_profile"></a>8. 执行 ~/.bash_profile</h3><blockquote>
<p>这个文件是用户专属的bash shell初始化脚本<br>当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量<br>~/.bash_profile会判断 ~/.bashrc文件是否存在并执行，~/.bashrc会判断/etc/bashrc文件是否存在并执行，最后设置PATH环境变量，结束。<br>所以~/.bashrc和/etc/bashrc都是层层嵌套执行的。  </p>
</blockquote>
<h3 id="9-执行-bashrc"><a href="#9-执行-bashrc" class="headerlink" title="9. 执行 ~/.bashrc"></a>9. 执行 ~/.bashrc</h3><blockquote>
<p>这个文件是用户专属的bash shell初始化脚本<br>当登录时以及每次打开新的shell时,该文件被执行<br>~/.bashrc 会判断 /etc/bashrc文件是否存在并执行  </p>
</blockquote>
<h3 id="10-执行-etc-bashrc"><a href="#10-执行-etc-bashrc" class="headerlink" title="10. 执行 /etc/bashrc"></a>10. 执行 /etc/bashrc</h3><blockquote>
<p>这个文件是bash环境的全局文件。几乎默认存在，每个登录的用户上去之后都要初始化一下bash的环境。<br>当bash shell被打开时,该文件被执行（即每次新开一个终端，都会执行bashrc）</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Linux </category>
            
            <category> Linux启动顺序 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
  
  
    
    <entry>
      <title><![CDATA[关于]]></title>
      <url>http://www.nice-jj.com/about/index.html</url>
      <content type="html"><![CDATA[<p>路漫漫其修远兮<br>联系我：957675270</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[读书]]></title>
      <url>http://www.nice-jj.com/reading/index.html</url>
      <content type="html"></content>
    </entry>
    
  
</search>
